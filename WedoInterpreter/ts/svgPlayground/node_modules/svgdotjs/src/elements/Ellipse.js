import {
  extend,
  nodeOrNew,
  register,
  wrapWithAttrCheck
} from 'svg.js/src/utils/adopter.js'
import { proportionalSize } from 'svg.js/src/utils/utils.js'
import { registerMethods } from 'svg.js/src/utils/methods.js'
import SVGNumber from 'svg.js/src/types/SVGNumber.js'
import Shape from 'svg.js/src/elements/Shape.js'
import * as circled from 'svg.js/src/modules/core/circled.js'

export default class Ellipse extends Shape {
  constructor (node) {
    super(nodeOrNew('ellipse', node), node)
  }

  size (width, height) {
    var p = proportionalSize(this, width, height)

    return this
      .rx(new SVGNumber(p.width).divide(2))
      .ry(new SVGNumber(p.height).divide(2))
  }
}

extend(Ellipse, circled)

registerMethods('Container', {
  // Create an ellipse
  ellipse: wrapWithAttrCheck(function (width = 0, height = width) {
    return this.put(new Ellipse()).size(width, height).move(0, 0)
  })
})

register(Ellipse, 'Ellipse')
